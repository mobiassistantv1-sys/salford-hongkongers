<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ç¾©å·¥ç°½åˆ° | Salford Hongkongers</title>
<style>
:root {
  --pink: #ff2d78;
  --blue: #00d4ff;
  --purple: #b44fff;
  --green-neon: #39ff14;
  --bg: #0a0a0f;
  --card-bg: rgba(255,255,255,0.05);
  --card-border: rgba(255,255,255,0.1);
  --text: #f0f0f0;
  --text-muted: rgba(255,255,255,0.45);
  --radius: 16px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Segoe UI', system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background-image:
    radial-gradient(ellipse at 20% 20%, rgba(255,45,120,0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 80%, rgba(0,212,255,0.08) 0%, transparent 50%);
}

/* NAV */
nav {
  background: rgba(10,10,15,0.95);
  border-bottom: 1px solid rgba(255,45,120,0.3);
  padding: 14px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
  backdrop-filter: blur(12px);
  position: sticky; top: 0; z-index: 100;
}
nav .logo {
  color: #fff;
  font-size: 1rem;
  font-weight: 800;
  letter-spacing: -0.3px;
}
nav .logo span {
  color: var(--pink);
  text-shadow: 0 0 10px var(--pink);
}
nav .nav-time {
  color: var(--blue);
  font-size: 0.88rem;
  font-variant-numeric: tabular-nums;
  font-weight: 700;
  text-shadow: 0 0 8px var(--blue);
}
nav .back-btn {
  color: var(--text-muted);
  font-size: 0.85rem;
  text-decoration: none;
  display: flex; align-items: center; gap: 4px;
  transition: color 0.2s;
}
nav .back-btn:hover { color: var(--pink); }

/* LAYOUT */
.page {
  display: flex; flex-direction: column; gap: 16px;
  padding: 20px 16px 40px;
  max-width: 560px; margin: 0 auto; width: 100%;
}

/* CLOCK HERO */
.clock-hero {
  background: linear-gradient(135deg, rgba(255,45,120,0.15), rgba(0,212,255,0.1));
  border: 1px solid rgba(255,45,120,0.3);
  border-radius: var(--radius);
  padding: 28px 20px 22px;
  text-align: center;
  position: relative;
  overflow: hidden;
  box-shadow: 0 0 30px rgba(255,45,120,0.15), inset 0 1px 0 rgba(255,255,255,0.1);
}
.clock-hero::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 100%);
  pointer-events: none;
}
.clock-display {
  font-size: 3.4rem; font-weight: 800;
  letter-spacing: 6px; font-variant-numeric: tabular-nums;
  line-height: 1; margin-bottom: 8px;
  color: #fff;
  text-shadow: 0 0 20px rgba(255,45,120,0.8), 0 0 40px rgba(255,45,120,0.4);
}
.clock-date {
  font-size: 0.9rem;
  color: var(--text-muted);
  letter-spacing: 0.3px;
}

/* CARD */
.card {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: var(--radius);
  padding: 20px;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}
.card-header {
  display: flex; align-items: center; gap: 12px;
  margin-bottom: 18px; padding-bottom: 14px;
  border-bottom: 1px solid var(--card-border);
}
.card-icon {
  width: 44px; height: 44px;
  background: linear-gradient(135deg, var(--pink), var(--purple));
  border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem;
  box-shadow: 0 0 20px rgba(255,45,120,0.4);
}
.card-title {
  font-size: 1.15rem; font-weight: 700;
  color: #fff; line-height: 1.3;
}
.card-subtitle {
  font-size: 0.82rem;
  color: var(--text-muted);
  margin-top: 2px;
}

/* FORM */
.form-group { margin-bottom: 16px; }
.form-label {
  display: block;
  font-size: 0.88rem; font-weight: 600;
  color: var(--text);
  margin-bottom: 8px;
  letter-spacing: 0.2px;
}
.form-label .required { color: var(--pink); margin-left: 2px; }
.form-input,
.form-select {
  width: 100%; padding: 14px 16px;
  background: rgba(255,255,255,0.08);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  color: var(--text);
  font-size: 0.95rem;
  outline: none;
  transition: all 0.2s;
  font-family: inherit;
}
.form-input::placeholder { color: var(--text-muted); }
.form-input:focus,
.form-select:focus {
  background: rgba(255,255,255,0.1);
  border-color: var(--pink);
  box-shadow: 0 0 0 3px rgba(255,45,120,0.15);
}
.form-select { appearance: none; cursor: pointer; }

/* ROLE SELECTOR */
.role-selector {
  display: grid; gap: 10px;
}
.role-btn {
  display: flex; align-items: center; gap: 12px;
  padding: 16px 18px;
  background: var(--card-bg);
  border: 2px solid var(--card-border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
}
.role-btn::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,45,120,0.1), rgba(180,79,255,0.1));
  opacity: 0;
  transition: opacity 0.2s;
}
.role-btn:hover::before { opacity: 1; }
.role-btn.active {
  border-color: var(--pink);
  background: rgba(255,45,120,0.15);
  box-shadow: 0 0 20px rgba(255,45,120,0.3);
}
.role-btn.active::before { opacity: 0; }
.role-icon {
  width: 50px; height: 50px;
  background: linear-gradient(135deg, var(--pink), var(--purple));
  border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem;
  flex-shrink: 0;
}
.role-btn.active .role-icon {
  background: linear-gradient(135deg, var(--pink), var(--blue));
  box-shadow: 0 0 25px rgba(255,45,120,0.6);
}
.role-content { flex: 1; text-align: left; }
.role-name {
  font-size: 1rem; font-weight: 700;
  color: #fff; margin-bottom: 3px;
}
.role-desc {
  font-size: 0.8rem;
  color: var(--text-muted);
  line-height: 1.3;
}
.role-radio {
  width: 22px; height: 22px;
  border: 2px solid var(--card-border);
  border-radius: 50%;
  flex-shrink: 0;
  position: relative;
  transition: all 0.2s;
}
.role-btn.active .role-radio {
  border-color: var(--pink);
  background: var(--pink);
  box-shadow: 0 0 10px rgba(255,45,120,0.6);
}
.role-btn.active .role-radio::after {
  content: 'âœ“';
  position: absolute;
  inset: 0;
  display: flex; align-items: center; justify-content: center;
  color: #fff;
  font-size: 0.8rem;
  font-weight: 700;
}

/* BUTTON */
.btn-primary {
  width: 100%; padding: 16px;
  background: linear-gradient(135deg, var(--pink), var(--purple));
  border: none; border-radius: 12px;
  color: #fff; font-size: 1rem; font-weight: 700;
  cursor: pointer;
  box-shadow: 0 8px 25px rgba(255,45,120,0.4);
  transition: all 0.2s;
  letter-spacing: 0.3px;
  text-transform: uppercase;
}
.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 30px rgba(255,45,120,0.5);
}
.btn-primary:active { transform: translateY(0); }
.btn-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* SUCCESS MODAL */
.modal {
  position: fixed; inset: 0;
  background: rgba(10,10,15,0.9);
  backdrop-filter: blur(8px);
  display: none; align-items: center; justify-content: center;
  z-index: 200; padding: 20px;
}
.modal.show { display: flex; }
.modal-content {
  background: var(--card-bg);
  border: 1px solid rgba(255,45,120,0.3);
  border-radius: var(--radius);
  padding: 32px 24px;
  max-width: 400px; width: 100%;
  text-align: center;
  box-shadow: 0 10px 50px rgba(255,45,120,0.3);
  backdrop-filter: blur(20px);
}
.modal-icon {
  width: 80px; height: 80px;
  background: linear-gradient(135deg, var(--green-neon), #00ff88);
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 2.5rem;
  margin: 0 auto 20px;
  box-shadow: 0 0 40px rgba(57,255,20,0.6);
  animation: pulse 1.5s ease-in-out infinite;
}
@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}
.modal-title {
  font-size: 1.5rem; font-weight: 800;
  color: #fff; margin-bottom: 10px;
}
.modal-message {
  font-size: 0.95rem;
  color: var(--text-muted);
  line-height: 1.5;
  margin-bottom: 24px;
}
.modal-btn {
  width: 100%; padding: 14px;
  background: linear-gradient(135deg, var(--green-neon), #00ff88);
  border: none; border-radius: 10px;
  color: #000; font-size: 0.95rem; font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 20px rgba(57,255,20,0.4);
  transition: all 0.2s;
}
.modal-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(57,255,20,0.5);
}

/* LOADING */
.loading-overlay {
  position: fixed; inset: 0;
  background: rgba(10,10,15,0.9);
  display: none; align-items: center; justify-content: center;
  z-index: 300;
  backdrop-filter: blur(4px);
}
.loading-overlay.show { display: flex; }
.spinner {
  width: 60px; height: 60px;
  border: 4px solid rgba(255,45,120,0.2);
  border-top-color: var(--pink);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* STATS */
.stats {
  display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;
  margin-top: 16px;
}
.stat-box {
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  padding: 14px;
  text-align: center;
}
.stat-value {
  font-size: 1.8rem; font-weight: 800;
  color: var(--pink);
  line-height: 1;
  margin-bottom: 6px;
  text-shadow: 0 0 15px rgba(255,45,120,0.6);
}
.stat-label {
  font-size: 0.8rem;
  color: var(--text-muted);
}

@media (max-width: 480px) {
  .clock-display { font-size: 2.8rem; letter-spacing: 4px; }
  .role-btn { padding: 14px; }
  .role-icon { width: 44px; height: 44px; font-size: 1.3rem; }
}
</style>
</head>
<body>

<nav>
  <div class="logo">Salford<span>HK</span></div>
  <div class="nav-time" id="nav-clock">--:--:--</div>
  <a href="forms.html" class="back-btn">â† è¿”å›</a>
</nav>

<div class="page">
  <!-- CLOCK HERO -->
  <div class="clock-hero">
    <div class="clock-display" id="hero-clock">--:--:--</div>
    <div class="clock-date" id="hero-date">è¼‰å…¥ä¸­...</div>
  </div>

  <!-- CHECK-IN FORM -->
  <div class="card">
    <div class="card-header">
      <div class="card-icon">ğŸ“‹</div>
      <div>
        <div class="card-title">ç¾©å·¥ç°½åˆ°ç³»çµ±</div>
        <div class="card-subtitle">å¿«é€Ÿç°½åˆ°ï¼Œè¨˜éŒ„ä½ çš„è²¢ç»</div>
      </div>
    </div>

    <form id="checkin-form">
      <div class="form-group">
        <label class="form-label">å§“å <span class="required">*</span></label>
        <input type="text" name="name" class="form-input" required placeholder="è¼¸å…¥ä½ çš„å§“å">
      </div>

      <div class="form-group">
        <label class="form-label">é›»éƒµ <span class="required">*</span></label>
        <input type="email" name="email" class="form-input" required placeholder="example@email.com">
      </div>

      <div class="form-group">
        <label class="form-label">æ´»å‹•åç¨± <span class="required">*</span></label>
        <select name="event" class="form-select" required>
          <option value="">é¸æ“‡æ´»å‹•</option>
          <option value="chinese-new-year-2026">è¾²æ›†æ–°å¹´èšæœƒ 2026</option>
          <option value="hiking-mar">ä¸‰æœˆè¡Œå±±æ´»å‹•</option>
          <option value="food-festival">ç¾é£Ÿç¯€</option>
          <option value="career-workshop">è·æ¥­ç™¼å±•å·¥ä½œåŠ</option>
          <option value="community-meetup">ç¤¾å€èšæœƒ</option>
          <option value="other">å…¶ä»–æ´»å‹•</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">ä½ çš„è§’è‰² <span class="required">*</span></label>
        <div class="role-selector">
          <label class="role-btn">
            <div class="role-icon">ğŸ¯</div>
            <div class="role-content">
              <div class="role-name">æ´»å‹•çµ±ç±Œ</div>
              <div class="role-desc">è² è²¬ç­–åŠƒåŠå”èª¿æ´»å‹•æµç¨‹</div>
            </div>
            <div class="role-radio"></div>
            <input type="radio" name="role" value="coordinator" style="display: none;" required>
          </label>

          <label class="role-btn">
            <div class="role-icon">ğŸ™‹</div>
            <div class="role-content">
              <div class="role-name">ç¾å ´æ”¯æ´</div>
              <div class="role-desc">å”åŠ©å ´åœ°ä½ˆç½®ã€æ¥å¾…åŠåŸ·è¡Œ</div>
            </div>
            <div class="role-radio"></div>
            <input type="radio" name="role" value="support" style="display: none;">
          </label>

          <label class="role-btn">
            <div class="role-icon">ğŸ“¸</div>
            <div class="role-content">
              <div class="role-name">åª’é«”è¨˜éŒ„</div>
              <div class="role-desc">æ”å½±ã€éŒ„å½±åŠç¤¾äº¤åª’é«”ç®¡ç†</div>
            </div>
            <div class="role-radio"></div>
            <input type="radio" name="role" value="media" style="display: none;">
          </label>

          <label class="role-btn">
            <div class="role-icon">ğŸ’¬</div>
            <div class="role-content">
              <div class="role-name">å¤–å±•æœå‹™</div>
              <div class="role-desc">ç¤¾å€é€£çµã€å®£å‚³åŠç¾©å·¥æ‹›å‹Ÿ</div>
            </div>
            <div class="role-radio"></div>
            <input type="radio" name="role" value="outreach" style="display: none;">
          </label>
        </div>
      </div>

      <button type="submit" class="btn-primary">ç¢ºèªç°½åˆ°</button>
    </form>
  </div>

  <!-- STATS -->
  <div class="stats">
    <div class="stat-box">
      <div class="stat-value" id="today-count">0</div>
      <div class="stat-label">ä»Šæ—¥ç°½åˆ°</div>
    </div>
    <div class="stat-box">
      <div class="stat-value" id="total-count">0</div>
      <div class="stat-label">ç´¯è¨ˆç¸½æ•¸</div>
    </div>
  </div>
</div>

<!-- SUCCESS MODAL -->
<div class="modal" id="success-modal">
  <div class="modal-content">
    <div class="modal-icon">âœ“</div>
    <div class="modal-title">ç°½åˆ°æˆåŠŸï¼</div>
    <div class="modal-message">
      æ„Ÿè¬ä½ çš„åƒèˆ‡å’Œè²¢ç»<br>
      æˆ‘å€‘å·²è¨˜éŒ„ä½ çš„ç¾©å·¥æ™‚æ•¸
    </div>
    <button class="modal-btn" onclick="closeModal()">å®Œæˆ</button>
  </div>
</div>

<!-- LOADING OVERLAY -->
<div class="loading-overlay" id="loading">
  <div class="spinner"></div>
</div>

<script>
// Clock updates
function updateClocks() {
  const now = new Date();
  const timeStr = now.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
  const dateStr = now.toLocaleDateString('zh-HK', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
  
  document.getElementById('nav-clock').textContent = timeStr;
  document.getElementById('hero-clock').textContent = timeStr;
  document.getElementById('hero-date').textContent = dateStr;
}
updateClocks();
setInterval(updateClocks, 1000);

// Role selector interaction
document.querySelectorAll('.role-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.role-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    btn.querySelector('input[type="radio"]').checked = true;
  });
});

// Form submission
document.getElementById('checkin-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const formData = new FormData(e.target);
  const data = {
    name: formData.get('name'),
    email: formData.get('email'),
    event: formData.get('event'),
    role: formData.get('role'),
    checkin_time: new Date().toISOString(),
    user_agent: navigator.userAgent
  };
  
  // Show loading
  document.getElementById('loading').classList.add('show');
  
  try {
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyW5C2OudDZ9TQ-uGDedyD81geuGmQZeriw0mcX4Y8AYnzzxTJlAseqkM_1hE-nofKMVA/exec';
    
    await fetch(SCRIPT_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    
    // Update stats
    const todayCount = parseInt(document.getElementById('today-count').textContent) + 1;
    const totalCount = parseInt(document.getElementById('total-count').textContent) + 1;
    document.getElementById('today-count').textContent = todayCount;
    document.getElementById('total-count').textContent = totalCount;
    
    // Hide loading
    document.getElementById('loading').classList.remove('show');
    
    // Show success modal
    document.getElementById('success-modal').classList.add('show');
    
    // Reset form
    e.target.reset();
    document.querySelectorAll('.role-btn').forEach(b => b.classList.remove('active'));
    
  } catch (error) {
    document.getElementById('loading').classList.remove('show');
    alert('ç°½åˆ°å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚');
    console.error('Check-in error:', error);
  }
});

function closeModal() {
  document.getElementById('success-modal').classList.remove('show');
}

// Stats start at 0 (real data tracked in Google Sheets)
document.getElementById('today-count').textContent = '0';
document.getElementById('total-count').textContent = '0';
</script>

</body>
</html>